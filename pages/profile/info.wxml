<!-- info.wxml -->
<view class="container">
  <view class="page-title">个人信息</view>

  <form bindsubmit="submitUserInfo">
    <view class="info-form card">
      <view class="form-item">
        <text class="form-label">头像</text>
        <view class="avatar-upload">
          <image src="{{userInfo.avatar || '/assets/images/default-avatar.png'}}" class="avatar" bindtap="chooseAvatar"></image>
          <text class="upload-text">点击更换头像</text>
        </view>
      </view>

      <view class="form-item">
        <text class="form-label">昵称</text>
        <input type="text" name="nickname" placeholder="请输入昵称" value="{{userInfo.nickname}}" bindinput="onNicknameChange" class="input" />
      </view>

      <view class="form-item">
        <text class="form-label">手机号</text>
        <input type="text" value="{{userInfo.phone || '未绑定'}}" disabled="{{true}}" class="input disabled" />
        <text class="bind-text" wx:if="{{!userInfo.phone}}" bindtap="bindPhone">绑定手机号</text>
      </view>

      <view class="form-item">
        <text class="form-label">考试类型</text>
        <picker bindchange="onExamTypeChange" value="{{examTypeIndex}}" range="{{examTypes}}">
          <view class="picker-input">
            {{userInfo.examType || '请选择考试类型'}}
            <image src="/assets/icons/arrow-down.png" class="arrow-icon"></image>
          </view>
        </picker>
      </view>

      <view class="form-item">
        <text class="form-label">考试日期</text>
        <picker mode="date" bindchange="onExamDateChange" value="{{examDate}}" start="{{startDate}}" end="{{endDate}}">
          <view class="picker-input">
            {{userInfo.examDate || '请选择考试日期'}}
            <image src="/assets/icons/arrow-down.png" class="arrow-icon"></image>
          </view>
        </picker>
      </view>

      <view class="form-item">
        <text class="form-label">每日学习时长目标</text>
        <slider bindchange="onStudyHoursChange" min="1" max="12" value="{{studyHours}}" show-value />
        <text class="target-hours">{{studyHours}}小时/天</text>
      </view>

      <view class="form-item">
        <text class="form-label">自我介绍</text>
        <textarea name="selfIntroduction" placeholder="请介绍自己" value="{{userInfo.selfIntroduction}}" bindinput="onSelfIntroductionChange" class="textarea" auto-height="{{true}}" maxlength="500"></textarea>
      </view>

      <button class="btn btn-primary" form-type="submit" loading="{{isSubmitting}}">
        保存修改
      </button>
    </view>
  </form>
</view>